<script src="gl-matrix.min.js"></script>
<script src="//rawgit.com/maierfelix/glmw/master/dist/glmw-browser.js"></script>

<script>
  glMatrix.setMatrixArrayType(Array)
  glmw.init().then(instance => {
    setInterval(() => {
      init();
    }, 1000);
  });
  function init() {
    // gl-matrix
    {
      let ns = mat4;
      let a = ns.create();
      let b = ns.create();
      let c = ns.create();
      let now = performance.now();
      for (let ii = 0; ii < 100000; ++ii) {
        ns.multiply(c, a, b);
      };
      let then = performance.now();
      console.log("JavaScript:", then - now, "ms", a);
    }
    // glmw
    {
      let ns = glmw.mat4;
      let a = ns.create();
      let b = ns.create();
      let c = ns.create();
      let now = performance.now();
      for (let ii = 0; ii < 100000; ++ii) {
        ns.multiply(c, a, b);
      };
      let then = performance.now();
      console.log("WebAssembly:", then - now, "ms", ns.view(a));
    }
    console.log('-----')
  };
</script>